var ESurksha=function(){"use strict";let n={};function e(){return n}async function t(n,t){const{apiBaseUrl:o,tenantId:c,token:a}=e();return fetch(`${o}/user/consents`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"x-tenant-id":c,"Content-Type":"application/json"},body:JSON.stringify({consentCode:n,granted:t})})}let o=[];function c(){document.querySelectorAll('script[type="text/plain"][data-es-consent]').forEach(n=>{if(!function(n){const e=o.find(e=>e.code===n);return!(!e||!0!==e.consent_given||e.revoked_at)}(n.dataset.esConsent))return;const e=document.createElement("script");Array.from(n.attributes).forEach(n=>{"type"!==n.name&&e.setAttribute(n.name,n.value)}),e.src=n.src,e.async=!0,n.parentNode.replaceChild(e,n)})}return{init:async function(a){!function(e){n=e}(a);const r=await async function(){const{apiBaseUrl:n,tenantId:t,token:o}=e();return(await fetch(`${n}/user/consents/purposes`,{headers:{Authorization:`Bearer ${o}`,"x-tenant-id":t}})).json()}(),s=await async function(){const{apiBaseUrl:n,tenantId:t,token:o}=e();return(await fetch(`${n}/user/consents`,{headers:{Authorization:`Bearer ${o}`,"x-tenant-id":t}})).json()}();o=s,c();const i=r.filter(n=>{const e=s.find(e=>e.code===n.code);return!e||(!e.consent_given||e.consent_version<n.version)});i.length>0&&function(n){const e=document.createElement("div");e.style="\n    position: fixed;\n    bottom: 0;\n    width: 100%;\n    background: #111;\n    color: #fff;\n    padding: 20px;\n    z-index: 9999;\n  ",e.innerHTML=`\n    <h3>Privacy Preferences</h3>\n    ${n.map(n=>`\n      <label>\n        <input type="checkbox" data-code="${n.code}">\n        ${n.description}\n      </label><br/>\n    `).join("")}\n    <button id="es-save">Save</button>\n  `,document.body.appendChild(e),document.getElementById("es-save").onclick=async()=>{const n=e.querySelectorAll("input[type=checkbox]");for(const e of n)await t(e.dataset.code,e.checked);e.remove(),c()}}(i)}}}();
//# sourceMappingURL=esurksha-1.0.0.min.js.map
